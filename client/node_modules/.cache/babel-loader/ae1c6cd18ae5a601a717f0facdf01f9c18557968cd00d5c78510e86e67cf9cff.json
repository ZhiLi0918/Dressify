{"ast":null,"code":"var _jsxFileName = \"/Users/zhili/Desktop/KusiShopping/client/src/components/Products.jsx\",\n  _s = $RefreshSig$();\nimport styled from \"styled-components\";\nimport Product from \"./Product\";\nimport { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n    margin-top: 180px;\n    padding: 20px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n`;\n_c = Container;\nexport default function Products({\n  cat,\n  filters,\n  sort\n}) {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  useEffect(() => {\n    const getProducts = async () => {\n      try {\n        const res = await axios.get(cat ? `http://localhost:8080/api/product?category=${cat}` : \"http://localhost:8080/api/product\");\n        setProducts(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getProducts();\n  }, [cat]);\n  useEffect(() => {\n    cat && setFilteredProducts(products.filter(item => Object.entries(filters).every(([key, value]) => item[key].includes(value))));\n  }, [products, cat, filters]);\n  useEffect(() => {\n    if (sort === \"newest\") {\n      setFilteredProducts(prev => [...prev].sort((a, b) => a.createdAt - b.createdAt));\n    } else if (sort === \"asc\") {\n      setFilteredProducts(prev => [...prev].sort((a, b) => a.price - b.price));\n    } else {\n      setFilteredProducts(prev => [...prev].sort((a, b) => b.price - a.price));\n    }\n  }, [sort]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: cat ? filteredProducts.map((item, index) => /*#__PURE__*/_jsxDEV(Product, {\n      item: item\n    }, item.id || index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 58\n    }, this)) : products.slice(0, 8).map((item, index) => /*#__PURE__*/_jsxDEV(Product, {\n      item: item\n    }, item.id || index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 62\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n_s(Products, \"K1gQB4m1/iw3k3jmt5rFCbNdg2E=\");\n_c2 = Products;\nvar _c, _c2;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Products\");","map":{"version":3,"names":["styled","Product","useEffect","useState","axios","jsxDEV","_jsxDEV","Container","div","_c","Products","cat","filters","sort","_s","products","setProducts","filteredProducts","setFilteredProducts","getProducts","res","get","data","err","console","log","filter","item","Object","entries","every","key","value","includes","prev","a","b","createdAt","price","children","map","index","id","fileName","_jsxFileName","lineNumber","columnNumber","slice","_c2","$RefreshReg$"],"sources":["/Users/zhili/Desktop/KusiShopping/client/src/components/Products.jsx"],"sourcesContent":["import styled from \"styled-components\";\nimport Product from \"./Product\";\nimport { useEffect, useState } from \"react\";\nimport axios from 'axios';\n\nconst Container = styled.div`\n    margin-top: 180px;\n    padding: 20px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n`\n\nexport default function Products({ cat, filters, sort }) {\n\n    const [products, setProducts] = useState([])\n    const [filteredProducts, setFilteredProducts] = useState([])\n\n    useEffect(() => {\n        const getProducts = async() => {\n            try{\n                const res = await axios.get(cat ? `http://localhost:8080/api/product?category=${cat}` : \"http://localhost:8080/api/product\")\n                setProducts(res.data)\n            }catch(err){\n                console.log(err)\n            }\n        }\n        getProducts()\n    }, [cat])\n\n    useEffect(() => {\n        cat && setFilteredProducts(products.filter(item => Object.entries(filters).every(([key, value]) => \n            item[key].includes(value)\n        )))\n    }, [products, cat, filters])\n\n    useEffect(() => {\n        if(sort === \"newest\"){\n            setFilteredProducts(prev => [...prev].sort((a, b) => a.createdAt - b.createdAt))\n        }else if(sort === \"asc\"){\n            setFilteredProducts(prev => [...prev].sort((a, b) => a.price - b.price)) \n        }else{\n            setFilteredProducts(prev => [...prev].sort((a, b) => b.price - a.price))\n        }\n    }, [sort])\n\n    return (\n        <Container>\n            { cat \n                ? filteredProducts.map((item, index) => (<Product item={item} key={item.id || index}/>)) \n                : products.slice(0, 8).map((item, index) => (<Product item={item} key={item.id || index}/>))\n            }\n        </Container>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}